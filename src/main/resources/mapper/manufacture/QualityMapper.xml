<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.wyait.manage.dao.manufacture.QualityMapper">




    <select id="getDailyWorkPlan" resultType="com.wyait.manage.entity.manufacture.WorkPlanQualityDTO">
        SELECT pp.plandate, pp.invcode, i.cInvName as invName, i.cInvStd as invStd, p.procedurename,pp.planhour, pp.planqty, w.qualifiedqty, w.unqualifiedqty, w.hasInspected
        FROM prodplan pp
        INNER JOIN Inventory i ON pp.invcode = i.cInvCode
        INNER JOIN proced p ON pp.procedurecode = p.procedurecode
        LEFT JOIN work w ON pp.id = w.prodPlanId
        WHERE pp.workstationcode = #{workStationCode} AND CONVERT(varchar,plandate,23) = CONVERT(varchar,GETDATE(),23)
    </select>


</mapper>